#!/bin/sh

# The PostgreSQL snap only works with the en_US locale
LC_ALL=en_US.UTF-8

$SNAP/usr/bin/wrapper-pg_ctl -D $SNAP_USER_COMMON/data -l $SNAP_USER_COMMON/logs/logfile start

# Wait until the database is ready
while ! $SNAP/usr/bin/pg_isready -h 127.0.0.1; do
    sleep 1
done

echo "Database is ready"
